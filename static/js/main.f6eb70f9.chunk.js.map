{"version":3,"sources":["helpers/index.ts","components/product/index.tsx","components/app/index.tsx","index.tsx"],"names":["unitsText","data","units","getClassName","base","mods","filter","item","length","reduce","prev","push","join","getPlurals","unitsDictionary","value","toString","slice","addUnitsText","params","text","Product","id","title","taste","disabled","gift","quantity","weight","temptation","isClientHappy","inputId","useState","isChecked","setChecked","isDisabled","setDisabled","isLeaved","setLeaved","isHover","setHover","getMods","productClassName","cardClassName","temptationElement","common","actionBtn","selected","className","onClick","onCardClick","type","temptationActionText","getTemptationElement","descText","getDesc","descSelectedHover","desc","name","checked","onChange","event","isInputChecked","currentTarget","htmlFor","aria-hidden","onMouseLeave","onMouseOver","dataItems","clientHappy","map","index","valueElement","key","getFeaturesItems","replace","App","cards","items","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f6eb70f9.chunk.js","sourcesContent":["import data from '../data.json';\nconst unitsText: Record<string, string | Array<string>> = data.units;\n\nexport const getClassName = (base: string, mods: Array<string> | null): string => {\n  if (mods) {\n    mods = mods.filter(item => item);\n  }\n  if (!mods || mods.length === 0) {\n    return base;\n  }\n\n  const classesList = mods.reduce((prev, item) => {\n    prev.push(`${base}--${item}`);\n    return prev;\n  }, [base]);\n\n  return classesList.join(' ');\n};\n\nexport const formatWeight = (value: number | undefined): string => {\n  if (!value) {\n    return '';\n  }\n  return value.toString().replace('.', ',');\n};\n\ninterface IaddUnitsText { value: number; units: string }\n\ninterface IgetPlurals {\n  unitsDictionary: Array<string>;\n  value: number;\n}\n\nconst getPlurals = ({ unitsDictionary, value }: IgetPlurals): string => {\n  if (unitsDictionary.length < 3) {\n    return '';\n  }\n\n  if (value > 100) {\n    value = +value.toString().slice(-2);\n  }\n\n  if (value > 20) {\n    value = value % 10;\n  }\n\n  if (value === 1) {\n    return unitsDictionary[0];\n  }\n\n  if (value > 1 && value < 5) {\n    return unitsDictionary[1];\n  }\n\n  return unitsDictionary[2];\n};\n\nexport const addUnitsText = (params: IaddUnitsText): valueWithUnits => {\n  const { value, units } = params;\n  const text: string | Array<string> = unitsText[units];\n\n  if (typeof text === 'string') {\n    return {\n      ...params,\n      unitsText: text\n    };\n  }\n\n  return {\n    ...params,\n    unitsText: getPlurals({ unitsDictionary: text, value })\n  };\n};\n","import React, { Fragment, useState } from 'react';\nimport { getClassName, formatWeight } from '../../helpers';\n\nimport data from '../../data.json';\nimport './styles.scss';\ninterface IProduct {\n  id: string;\n  title: string;\n  taste: string;\n  disabled: boolean;\n  quantity: valueWithUnits;\n  gift: valueWithUnits;\n  weight: valueWithUnits;\n  temptation: { selected: string };\n  isClientHappy: boolean | undefined;\n}\n\nfunction Product ({ id, title, taste, disabled, gift, quantity, weight, temptation, isClientHappy }: IProduct): JSX.Element {\n  const inputId = `product-${id}`;\n  const [isChecked, setChecked] = useState(false);\n  const [isDisabled, setDisabled] = useState(disabled);\n  const [isLeaved, setLeaved] = useState(false);\n  const [isHover, setHover] = useState(false);\n  const mods = getMods();\n  const productClassName = getClassName('product', mods);\n  const cardClassName = getClassName('product__card', mods);\n  const temptationElement = getTemptationElement();\n  const descText = getDesc();\n\n  function getMods (): Array<string> {\n    const mods = [];\n\n    if (isChecked) {\n      mods.push('checked');\n    }\n    if (isDisabled) {\n      mods.push('disabled');\n    }\n    if (isLeaved) {\n      mods.push('leaved');\n    }\n\n    return mods;\n  }\n\n  function onInputChange (event: React.FormEvent<HTMLInputElement>): void {\n    const isInputChecked = event.currentTarget.checked;\n    setChecked(isInputChecked);\n\n    if (!isInputChecked) {\n      setLeaved(false);\n    }\n  }\n\n  function onCardClick (): void {\n    if (isDisabled) {\n      return;\n    }\n\n    if (!isChecked) {\n      setLeaved(false);\n    }\n\n    setChecked(!isChecked);\n  }\n\n  function onCardLeave (): void {\n    setHover(false);\n\n    if (!isChecked) {\n      setLeaved(false);\n      return;\n    }\n\n    setLeaved(true);\n  }\n\n  function onCardHover (): void {\n    if (isDisabled) {\n      return;\n    }\n\n    setHover(true);\n  }\n\n  function onDisableButtonClick (): void {\n    setDisabled(!isDisabled);\n  }\n\n  function getTemptationElement (): JSX.Element {\n    let text = data.common.temptation;\n    let actionBtn = null;\n\n    if (isDisabled) {\n      text = `Печалька, ${taste} закончился`;\n    }\n\n    if (isChecked) {\n      text = temptation.selected;\n    }\n\n    if (!isDisabled && !isChecked) {\n      actionBtn = <Fragment>\n        &nbsp;<button\n        className=\"product__temptation-button\"\n        onClick={onCardClick}\n        type=\"button\">{data.common.temptationActionText}</button>\n      </Fragment>;\n    }\n\n    return (\n      <div className=\"product__temptation\">\n        {text}\n        {actionBtn}\n      </div>\n    );\n  }\n\n  function getDesc (): string {\n    if (isChecked && isLeaved && isHover) {\n      return data.common.descSelectedHover;\n    }\n\n    return data.common.desc;\n  }\n\n  function getFeaturesItems (): JSX.Element[] {\n    const dataItems = [\n      quantity,\n      {\n        ...gift,\n        text: 'в подарок'\n      }\n    ];\n\n    if (isClientHappy) {\n      dataItems.push({ text: data.common.clientHappy });\n    }\n\n    const items: JSX.Element[] = dataItems.map(({ value, unitsText, text }, index) => {\n      let valueElement;\n      const id = `feature-${index}`;\n\n      if ((value && value > 1)) {\n        valueElement = <Fragment>\n          <span className=\"product__value\">\n            {value}\n          </span>&nbsp;\n        </Fragment>;\n      }\n\n      if (unitsText && text) {\n        unitsText += ' ';\n      }\n\n      return (\n        <li\n          key={id}\n          className=\"product__feature\"\n        >\n          {valueElement}\n\n          {unitsText}\n\n          {text}\n        </li>\n      );\n    });\n\n    return items;\n  }\n\n  function getLabelText (): string {\n    return `\n      ${getDesc()}.\n\n      ${title} ${taste},\n      ${weight.value}\n      ${weight.unitsText}.\n\n      ${quantity.value}\n      ${quantity.unitsText},\n\n      ${gift.value}\n      ${gift.unitsText}\n      в подарок.\n    `;\n  }\n\n  return (\n    <div className={productClassName}>\n      {/*\n        По клику дизейблится карточка\n        Сделано для удобной проверки состояния\n      */}\n      <button\n        className=\"product__disable-btn\"\n        type=\"button\"\n        onClick={onDisableButtonClick}\n        title=\"Задизейблить продукт\"\n      >\n        <span className=\"visually-hidden\">Задизейблить продукт</span>\n      </button>\n\n      <input\n        className=\"product__input visually-hidden\"\n        type=\"checkbox\"\n        name=\"product\"\n        id={inputId}\n        checked={isChecked}\n        disabled={isDisabled}\n        onChange={onInputChange}\n      />\n      {/*\n      Скрытый лейбл для скринридеров.\n      Я не уверена в красоте этого решения, но мне хотелось\n      сохранить доступность для скринридеров и возможность\n      удобной стилизации для обычных пользователей\n      */}\n      <label\n        htmlFor={inputId}\n        className=\"visually-hidden\"\n      >\n        {getLabelText()}\n      </label>\n\n      <div\n        className={cardClassName}\n        aria-hidden=\"true\"\n        onClick={onCardClick}\n        onMouseLeave={onCardLeave}\n        onMouseOver={onCardHover}\n      >\n        <div className=\"product__card-inner\">\n\n          <div className=\"product__desc\">{descText}</div>\n\n          <h2 className=\"product__title\">\n            {title}\n            <span className=\"product__taste\">{taste}</span>\n          </h2>\n\n          <ul className=\"product__features\">\n            {getFeaturesItems()}\n          </ul>\n\n          <div className=\"product__weight\">\n            {formatWeight(weight.value)}\n\n            <div className=\"product__weight-units\">\n              {weight.unitsText}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {temptationElement}\n    </div>\n  );\n}\n\nexport default Product;\n","import React from 'react';\n\nimport Card from '../product';\nimport { addUnitsText } from '../../helpers';\n\nimport data from '../../data.json';\nimport './styles.scss';\n\nfunction App (): JSX.Element {\n  const cards = data.items.map(item => {\n    const { id, taste, disabled, gift, weight, quantity, temptation, isClientHappy } = item;\n\n    return (\n      <Card\n        id={id}\n        key={id}\n        title={data.common.name}\n        taste={taste}\n        disabled={disabled}\n        gift={addUnitsText(gift)}\n        weight={addUnitsText(weight)}\n        quantity={addUnitsText(quantity)}\n        temptation={temptation}\n        isClientHappy={isClientHappy}\n      />\n    );\n  });\n\n  return (\n    <div className=\"app\">\n      <h1 className=\"app__title\">Ты сегодня покормил кота?</h1>\n\n      <fieldset className=\"app__group\">\n        <legend className=\"visually-hidden\">Выберите корм</legend>\n\n        <div className=\"app__cards\">{cards}</div>\n      </fieldset>\n\n    </div>\n  );\n}\n\nexport default App;\n","import 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}